document.querySelectorAll(".wp-block-xlthlx-audio-player.player-container").forEach(n=>{if(n){let t=n.dataset.id,a;var r=n.querySelector(".playlist");r&&0!==r.length&&(a=r.getElementsByClassName("track"));let e=n.querySelector(".dashicons-controls-repeat");"true"===localStorage.getItem("repeat-"+t)&&e&&e.classList.add("on");const c=e=>{let t=Math.floor(e%60);return t<10&&(t="0"+t),Math.floor(e/60)+":"+t},o=e=>{0!==a.length&&(n.querySelector(".player").src=a[e].children[0].getAttribute("href"),n.querySelector(".player").load(),n.querySelector(".play-button").click())},i=e=>{var t=e.dataset.num,e=e.dataset.title;n.querySelector(".playing").textContent=t+" - "+e},u=e=>{"true"===localStorage.getItem("repeat-"+t)?(e[0].classList.add("active"),o(0),i(e[0].children[0])):(e[e.length-1].classList.add("active"),n.querySelector(".pause-button").click())},s=e=>{"true"===localStorage.getItem("repeat-"+t)?(e[e.length-1].classList.add("active"),o(e.length-1),i(e[e.length-1].children[0])):(e[0].classList.add("active"),n.querySelector(".pause-button").click())},l=t=>{if(0!==a.length)for(let e=0;e<a.length;e++)a[e].classList.contains("active")&&(a[e].classList.remove("active"),"next"===t?(e++,r=e,l=a,r<l.length?(l[r].classList.add("active"),o(r),i(l[r].children[0])):u(l)):(0<e?e--:e=a.length+1,r=e,l=a,r<l.length?(l[r].classList.add("active"),o(r),i(l[r].children[0])):s(l)));var r,l},d=()=>{n.querySelector(".vol-muted-btn").classList.toggle("display-none"),n.querySelector(".vol-mute-btn").classList.toggle("display-none")},y=()=>{n.querySelector(".volume-slider").value=n.querySelector(".player").volume},v=(n.querySelector(".vol-mute-btn").addEventListener("click",function(){n.querySelector(".player").muted=!0,n.querySelector(".player").volume=0,y(),d(),n.querySelector(".volume-slider").style.backgroundSize="0% 100%"}),n.querySelector(".vol-muted-btn").addEventListener("click",function(){n.querySelector(".player").muted=!1,n.querySelector(".player").volume=1,y(),d(),n.querySelector(".volume-slider").style.backgroundSize="100% 100%"}),n.querySelector(".play-button").addEventListener("click",function(){if(0!==a.length){n.querySelector(".player").play();for(let e=0;e<a.length;e++)a[e].classList.contains("active")&&i(a[e].children[0]);n.querySelector(".play-button").classList.add("display-none"),n.querySelector(".pause-button").classList.remove("display-none")}}),n.querySelector(".pause-button").addEventListener("click",function(){n.querySelector(".player").pause(),n.querySelector(".play-button").classList.remove("display-none"),n.querySelector(".pause-button").classList.add("display-none")}),n.querySelector(".next-button").addEventListener("click",function(){l("next")}),n.querySelector(".prev-button").addEventListener("click",function(){l("prev")}),n.querySelector(".player")),S=(v.addEventListener("loadedmetadata",function(){var e;a&&(n.querySelector(".total-time").innerHTML=c(v.duration),n.querySelector(".current-time").innerHTML=c(v.currentTime),n.querySelector(".time-sep").innerHTML=" / ",(e=n.querySelector(".seek-slider")).max=v.duration,e.setAttribute("value",v.currentTime))}),v.addEventListener("timeupdate",function(){var e,t,r,l;a&&(n.querySelector(".current-time").innerHTML=c(v.currentTime),(e=n.querySelector(".seek-slider")).setAttribute("value",v.currentTime),e.value=v.currentTime,t=e.min,r=e.max,l=e.value,e.style.backgroundSize=100*(l-t)/(r-t)+"% 100%")}),v.addEventListener("ended",function(){l("next")}),n.querySelector(".seek-slider").addEventListener("input",function(){v.currentTime=n.querySelector(".seek-slider").value}),n.querySelector(".volume-slider"));S.addEventListener("mousemove",function(){v.volume=S.value;var e=S.min,t=S.max,r=S.value;S.style.backgroundSize=100*(r-e)/(t-e)+"% 100%"}),n.querySelector(".repeat").addEventListener("click",function(){e.classList.toggle("on"),localStorage.removeItem("repeat-"+t),e.classList.contains("on")&&localStorage.setItem("repeat-"+t,"true")}),n.querySelectorAll(".item").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),n.querySelector(".player").src=t.href,n.querySelector(".player").load(),n.querySelector(".play-button").click(),i(t);for(let e=0;e<a.length;e++)a[e].classList.contains("active")&&a[e].classList.remove("active");t.parentElement.classList.add("active")})});for(let e=0;e<a.length;e++)a[e].addEventListener("click",function(){a[e].children[0].click()})}});