let elems,playlist=document.querySelector(".playlist"),svgRepeat=(playlist&&0!==playlist.length&&(elems=playlist.getElementsByClassName("track")),document.querySelector(".dashicons-controls-repeat"));"true"===localStorage.getItem("repeat")&&svgRepeat&&svgRepeat.classList.add("on");const convertElapsedTime=e=>{let t=Math.floor(e%60);return t<10&&(t="0"+t),Math.floor(e/60)+":"+t},setSource=e=>{0!==elems.length&&(document.querySelector(".player").src=elems[e].children[0].getAttribute("href"),document.querySelector(".player").load(),document.querySelector(".play-button").click())},setNowPlaying=e=>{var t=e.dataset.num,e=e.dataset.title;document.querySelector(".playing").textContent=t+" - "+e},setFirstTrack=e=>{"true"===localStorage.getItem("repeat")?(e[0].classList.add("active"),setSource(0),setNowPlaying(e[0].children[0])):(e[e.length-1].classList.add("active"),document.querySelector(".pause-button").click())},setLastTrack=e=>{"true"===localStorage.getItem("repeat")?(e[e.length-1].classList.add("active"),setSource(e.length-1),setNowPlaying(e[e.length-1].children[0])):(e[0].classList.add("active"),document.querySelector(".pause-button").click())},setNextTrack=(e,t)=>{e<t.length?(t[e].classList.add("active"),setSource(e),setNowPlaying(t[e].children[0])):setFirstTrack(t)},setPrevTrack=(e,t)=>{e<t.length?(t[e].classList.add("active"),setSource(e),setNowPlaying(t[e].children[0])):setLastTrack(t)},changeTrack=t=>{if(0!==elems.length)for(let e=0;e<elems.length;e++)elems[e].classList.contains("active")&&(elems[e].classList.remove("active"),("next"===t?(e++,setNextTrack):(0<e?e--:e=elems.length+1,setPrevTrack))(e,elems))},setPause=()=>{document.querySelector(".play-button").classList.remove("display-none"),document.querySelector(".pause-button").classList.add("display-none")},setPlay=()=>{document.querySelector(".play-button").classList.add("display-none"),document.querySelector(".pause-button").classList.remove("display-none")},toggleMuteUnmute=()=>{document.querySelector(".vol-muted-btn").classList.toggle("display-none"),document.querySelector(".vol-mute-btn").classList.toggle("display-none")},setVolumeSlider=()=>{document.querySelector(".volume-slider").value=document.querySelector(".player").volume},audio_player=(document.querySelector(".vol-mute-btn").addEventListener("click",function(){document.querySelector(".player").muted=!0,document.querySelector(".player").volume=0,setVolumeSlider(),toggleMuteUnmute(),document.querySelector(".volume-slider").style.backgroundSize="0% 100%"}),document.querySelector(".vol-muted-btn").addEventListener("click",function(){document.querySelector(".player").muted=!1,document.querySelector(".player").volume=1,setVolumeSlider(),toggleMuteUnmute(),document.querySelector(".volume-slider").style.backgroundSize="100% 100%"}),document.querySelector(".play-button").addEventListener("click",function(){if(0!==elems.length){document.querySelector(".player").play();for(let e=0;e<elems.length;e++)elems[e].classList.contains("active")&&setNowPlaying(elems[e].children[0]);setPlay()}}),document.querySelector(".pause-button").addEventListener("click",function(){document.querySelector(".player").pause(),setPause()}),document.querySelector(".next-button").addEventListener("click",function(){changeTrack("next")}),document.querySelector(".prev-button").addEventListener("click",function(){changeTrack("prev")}),document.querySelector(".player")),volSlider=(audio_player.addEventListener("loadedmetadata",function(){document.querySelector(".total-time").innerHTML=convertElapsedTime(audio_player.duration),document.querySelector(".current-time").innerHTML=convertElapsedTime(audio_player.currentTime),document.querySelector(".time-sep").innerHTML=" / ";var e=document.querySelector(".seek-slider");e.max=audio_player.duration,e.setAttribute("value",audio_player.currentTime)}),audio_player.addEventListener("timeupdate",function(){document.querySelector(".current-time").innerHTML=convertElapsedTime(audio_player.currentTime);var e=document.querySelector(".seek-slider"),t=(e.setAttribute("value",audio_player.currentTime),e.value=audio_player.currentTime,e.min),l=e.max,r=e.value;e.style.backgroundSize=100*(r-t)/(l-t)+"% 100%"}),audio_player.addEventListener("ended",function(){changeTrack("next")}),document.querySelector(".seek-slider").addEventListener("input",function(){audio_player.currentTime=document.querySelector(".seek-slider").value}),document.querySelector(".volume-slider"));volSlider.addEventListener("mousemove",function(){audio_player.volume=volSlider.value;var e=volSlider.min,t=volSlider.max,l=volSlider.value;volSlider.style.backgroundSize=100*(l-e)/(t-e)+"% 100%"}),document.querySelector(".repeat").addEventListener("click",function(){svgRepeat.classList.toggle("on"),localStorage.setItem("repeat",""),svgRepeat.classList.contains("on")&&localStorage.setItem("repeat","true")}),document.querySelectorAll(".item").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),document.querySelector(".player").src=t.href,document.querySelector(".player").load(),document.querySelector(".play-button").click(),setNowPlaying(t);for(let e=0;e<elems.length;e++)elems[e].classList.contains("active")&&elems[e].classList.remove("active");t.parentElement.classList.add("active")})});for(let e=0;e<elems.length;e++)elems[e].addEventListener("click",function(){elems[e].children[0].click()});